---
layout: Post
title: 從0開始學Linux
subtitle: 從0開始學Linux
author: 浩呆
date: 2022-08-20
useHeaderImage: true
headerImage: https://upload.cc/i1/2022/08/23/OQ4E1H.jpg
headerMask: rgba(40, 57, 101, .4)
tags: 
  - learn
---
# Linux

## **一、目錄文件相關**

### **1、ls命令**

就是 list 的縮寫，通過 ls 命令不僅可以查看 linux 文件夾包含的文件，而且可以查看文件權限(包括目錄、文件夾、文件權限)和查看目錄信息等等。

**常用參數搭配：**

```bash
ls -a 列出目錄所有文件，包含以.開始的隱藏文件
ls -A 列出除.及..的其它文件
ls -r 反序排列
ls -t 以文件修改時間排序
ls -S 以文件大小排序
ls -h 以易讀大小顯示
ls -l 除了文件名之外，還將文件的權限、所有者、文件大小等信息詳細列出來
```

### **2、cd 命令**

cd(changeDirectory) 命令語法：

```bash
cd [目錄名]

#進入要目錄
cd /

#進入 "home" 目錄
cd ~

#進入上一次工作路徑
cd -
```

### **3、pwd 命令**

pwd 命令用於查看當前工作目錄路徑。

```bash
#查看當前路徑
pwd

#查看軟鏈接的實際路徑
pwd -P
```

### **4、mkdir 命令**

mkdir 命令用於創建文件夾。

```bash
-m: 對新建目錄設置存取權限，也可以用 chmod 命令設置;
-p: 可以是一個路徑名稱。此時若路徑中的某些目錄尚不存在,加上此選項後，系統將自動建立好那些尚不在的目錄，即一次可以建立多個目錄。

#當前工作目錄下創建名為 t的文件夾
mkdir t

#在 tmp 目錄下創建路徑為 test/t1/t 的目錄，若不存在，則創建
mkdir -p /tmp/test/t1/t
```

### **5、rm 命令**

刪除一個目錄中的一個或多個文件或目錄，如果沒有使用 -r 選項，則 rm 不會刪除目錄。如果使用 rm 來刪除文件，通常仍可以將該文件恢復原狀。

```bash
rm [選項] 文件

#刪除任何 .log 文件，刪除前逐一詢問確認
rm -i *.log

#刪除 test 子目錄及子目錄中所有檔案刪除，並且不用一一確認
rm -rf test

#刪除以 -f 開頭的文件
rm -- -f*
```

### **6、rmdir 命令**

從一個目錄中刪除一個或多個子目錄項，刪除某目錄時也必須具有對其父目錄的寫權限。
**注意**：不能刪除非空目錄

```bash
#當 parent 子目錄被刪除後使它也成為空目錄的話，則順便一並刪除
rmdir -p parent/child/child11
```

### **7、mv 命令**

移動文件或修改文件名，根據第二參數類型（如目錄，則移動文件；如為文件則重命令該文件）。

當第二個參數為目錄時，第一個參數可以是多個以空格分隔的文件或目錄，然後移動第一個參數指定的多個文件到第二個參數指定的目錄中。

```bash
#將文件 test.log 重命名為 test1.txt
mv test.log test1.txt

#將文件 log1.txt,log2.txt,log3.txt 移動到根的 test3 目錄中
mv llog1.txt log2.txt log3.txt /test3

#文件 log1.txt 改名為 log2.txt，如果 log2.txt 已經存在，則詢問是否覆蓋
mv -i log1.txt log2.txt

#移動當前文件夾下的所有文件到上一級目錄
mv * ../
```

### **8、cp 命令**

將源文件複製至目標文件，或將多個源文件複製至目標目錄。

注意：命令行複製，如果目標文件已經存在會提示是否覆蓋，而在 shell 腳本中，如果不加 -i 參數，則不會提示，而是直接覆蓋！

```bash
-i 提示
-r 複製目錄及目錄內所有項目
-a 複製的文件與原文件時間一樣

#複製 a.txt 到 test 目錄下，保持原文件時間，如果原文件存在提示是否覆蓋。
cp -ai a.txt test

#為 a.txt 建立一個鏈接（快捷方式）
cp -s a.txt link_a.txt
```

### **9、ln 命令**

功能是為文件在另外一個位置建立一個同步的鏈接，當在不同目錄需要該問題時，就不需要為每一個目錄創建同樣的文件，通過 ln 創建的鏈接（link）減少磁盤佔用量。

鏈接分類：軟件鏈接及硬鏈接

軟鏈接：

1. 軟鏈接，以路徑的形式存在。類似於Windows操作系統中的快捷方式
2. 軟鏈接可以 跨文件系統 ，硬鏈接不可以
3. 軟鏈接可以對一個不存在的文件名進行鏈接
4. 軟鏈接可以對目錄進行鏈接

硬鏈接:

1. 硬鏈接，以文件副本的形式存在。但不佔用實際空間。
2. 不允許給目錄創建硬鏈接
3. 硬鏈接只有在同一個文件系統中才能創建

**需要注意：**

- 第一：ln命令會保持每一處鏈接文件的同步性，也就是說，不論你改動了哪一處，其它的文件都會發生相同的變化。
- 第二：ln的鏈接又分軟鏈接和硬鏈接兩種，軟鏈接就是ln –s 源文件 目標文件，它只會在你選定的位置上生成一個文件的鏡像，不會佔用磁盤空間，硬鏈接 ln 源文件 目標文件，沒有參數-s， 它會在你選定的位置上生成一個和源文件大小相同的文件，無論是軟鏈接還是硬鏈接，文件都保持同步變化。
- 第三：ln指令用在鏈接文件或目錄，如同時指定兩個以上的文件或目錄，且最後的目的地是一個已經存在的目錄，則會把前面指定的所有文件或目錄複製到該目錄中。若同時指定多個文件或目錄，且最後的目的地並非是一個已存在的目錄，則會出現錯誤信息。

```bash
-b 刪除，覆蓋以前建立的鏈接
-s 軟鏈接（符號鏈接）
-v 顯示詳細處理過程

#給文件創建軟鏈接，並顯示操作信息
ln -sv source.log link.log

#給文件創建硬鏈接，並顯示操作信息
ln -v source.log link1.log

#給目錄創建軟鏈接
ln -sv /opt/soft/test/test3 /opt/soft/test/test5
```

### **10、tar 命令**

用來壓縮和解壓文件。tar 本身不具有壓縮功能，只具有打包功能，有關壓縮及解壓是調用其它的功能來完成。

弄清兩個概念：打包和壓縮。打包是指將一大堆文件或目錄變成一個總的文件；壓縮則是將一個大的文件通過一些壓縮算法變成一個小文件

```bash
-c 建立新的壓縮文件
-f 指定壓縮文件
-r 添加文件到已經壓縮文件包中
-u 添加改了和現有的文件到壓縮包中
-x 從壓縮包中抽取文件
-t 顯示壓縮文件中的內容
-z 支持gzip壓縮
-j 支持bzip2壓縮
-Z 支持compress解壓文件
-v 顯示操作過程

#將文件全部打包成 tar 包
tar -cvf log.tar 1.log,2.log 或tar -cvf log.*

#將 /etc 下的所有文件及目錄打包到指定目錄，並使用 gz 壓縮
tar -zcvf /tmp/etc.tar.gz /etc

#查看剛打包的文件內容（一定加z，因為是使用 gzip 壓縮的）
tar -ztvf /tmp/etc.tar.gz

#要壓縮打包 /home, /etc ，但不要 /home/dmtsai
tar --exclude /home/dmtsai -zcvf myfile.tar.gz /home/* /etc
```

---

## **二、文件內容相關**

### **1、cat 命令**

cat 主要有三大功能：

**1.一次顯示整個文件:**

```bash

cat filename
```

**2.創建一個文件:**

```bash
cat > filename
```

只能創建新文件，不能編輯已有文件。

**3.將幾個文件合併為一個文件:**

```bash
cat file1 file2 > file
```

- b 對非空輸出行號
- n 輸出所有行號

```bash
#把 log2012.log 的文件內容加上行號後輸入 log2013.log 這個文件里
cat -n log2012.log log2013.log

#把 log2012.log 和 log2013.log 的文件內容加上行號（空白行不加）之後將內容附加到 log.log 里
cat -b log2012.log log2013.log log.log

#使用 here doc 生成新文件
cat >log.txt <<EOF
>Hello
>World
>PWD=$(pwd)
>EOF
ls -l log.txt
cat log.txt
Hello
World
PWD=/opt/soft/test

#反向列示
tac log.txt
PWD=/opt/soft/test
World
Hello
```

### **2、head 命令**

head 用來顯示檔案的開頭至標準輸出中，默認 head 命令打印其相應文件的開頭 10 行。

```bash
-n<行數> 顯示的行數（行數為複數表示從最後向前數）

#顯示 1.log 文件中前 20 行
head 1.log -n 20

#顯示 1.log 文件前 20 字節
head -c 20 log2014.log

#顯示 t.log最後 10 行
head -n -10 t.log
```

### **3、tail 命令**

用於顯示指定文件末尾內容，不指定文件時，作為輸入信息進行處理。常用查看日誌文件。

```bash
-f 循環讀取（常用於查看遞增的日誌文件）
-n<行數> 顯示行數（從後向前）

#循環讀取逐漸增加的文件內容
ping 127.0.0.1 > ping.log &
#後台運行：可使用 jobs -l 查看，也可使用 fg 將其移到前台運行。

tail -f ping.log
（查看日誌）
```

### **4、more 命令**

功能類似於 cat, more 會以一頁一頁的顯示方便使用者逐頁閱讀，而最基本的指令就是按空白鍵（space）就往下一頁顯示，按 b 鍵就會往回（back）一頁顯示。

```bash
+n      從笫 n 行開始顯示
-n       定義屏幕大小為n行
+/pattern 在每個檔案顯示前搜尋該字串（pattern），然後從該字串前兩行之後開始顯示 
-c       從頂部清屏，然後顯示
-d       提示「Press space to continue，’q’ to quit（按空格鍵繼續，按q鍵退出）」，禁用響鈴功能
-l        忽略Ctrl+l（換頁）字符
-p       通過清除窗口而不是滾屏來對文件進行換頁，與-c選項相似
-s       把連續的多個空行顯示為一行
-u       把文件內容中的下畫線去掉

常用操作命令：
	Enter    向下 n 行，需要定義。默認為 1 行
	Ctrl+F   向下滾動一屏
	空格鍵  向下滾動一屏
	Ctrl+B  返回上一屏
	=       輸出當前行的行號
	:f     輸出文件名和當前行的行號
	V      調用vi編輯器
	!命令   調用Shell，並執行命令
	q       退出more

#顯示文件中從第3行起的內容
more +3 text.txt

#在所列出文件目錄詳細信息，借助管道使每次顯示 5 行
ls -l | more -5
```

### **5、less 命令**

less 與 more 類似，但使用 less 可以隨意瀏覽文件，而 more 僅能向前移動，卻不能向後移動，而且 less 在查看之前不會加載整個文件。

```bash
-i  忽略搜索時的大小寫
-N  顯示每行的行號
-o  <文件名> 將less 輸出的內容在指定文件中保存起來
-s  顯示連續空行為一行
/字符串：向下搜索「字符串」的功能
?字符串：向上搜索「字符串」的功能
n：重復前一個搜索（與 / 或 ? 有關）
N：反向重復前一個搜索（與 / 或 ? 有關）
-x <數字> 將「tab」鍵顯示為規定的數字空格
b  向後翻一頁
d  向後翻半頁
h  顯示幫助界面
Q  退出less 命令
u  向前滾動半頁
y  向前滾動一行
空格鍵 滾動一行
回車鍵 滾動一頁
[pagedown]： 向下翻動一頁
[pageup]：   向上翻動一頁

#ps 查看進程信息並通過 less 分頁顯示
ps -aux | less -N

#查看多個文件
less 1.log 2.log

可以使用 n 查看下一個，使用 p 查看前一個。
```

### **6、wc 命令**

wc(word count)功能為統計指定的文件中字節數、字數、行數，並將統計結果輸出

```bash
wc [option] file..

-c 統計字節數
-l 統計行數
-m 統計字符數
-w 統計詞數，一個字被定義為由空白、跳格或換行字符分隔的字符串

#查找文件的 行數 單詞數 字節數 文件名
wc text.txt

#統計輸出結果的行數
cat test.txt | wc -l
```

### **7、grep 命令**

強大的文本搜索命令，grep(Global Regular Expression Print) 全局正則表達式搜索。

grep 的工作方式是這樣的，它在一個或多個文件中搜索字符串模板。如果模板包括空格，則必須被引用，模板後的所有字符串被看作文件名。搜索的結果被送到標準輸出，不影響原文件內容。

```bash
grep [option] pattern file|dir

-A n --after-context顯示匹配字符後n行
-B n --before-context顯示匹配字符前n行
-C n --context 顯示匹配字符前後n行
-c --count 計算符合樣式的列數
-i 忽略大小寫
-l 只列出文件內容符合指定的樣式的文件名稱
-f 從文件中讀取關鍵詞
-n 顯示匹配內容的所在文件中行數
-R 遞歸查找文件夾

grep 的規則表達式:
^  #錨定行的開始 如：'^grep'匹配所有以grep開頭的行。 
$  #錨定行的結束 如：'grep$'匹配所有以grep結尾的行。 
.  #匹配一個非換行符的字符 如：'gr.p'匹配gr後接一個任意字符，然後是p。  
*  #匹配零個或多個先前字符 如：'*grep'匹配所有一個或多個空格後緊跟grep的行。
.*   #一起用代表任意字符。  
[]   #匹配一個指定範圍內的字符，如'[Gg]rep'匹配Grep和grep。 
[^]  #匹配一個不在指定範圍內的字符，如：'[^A-FH-Z]rep'匹配不包含A-R和T-Z的一個字母開頭，緊跟rep的行。  
\(..\)  #標記匹配字符，如'\(love\)'，love被標記為1。   
\<      #錨定單詞的開始，如:'\<grep'匹配包含以grep開頭的單詞的行。
\>      #錨定單詞的結束，如'grep\>'匹配包含以grep結尾的單詞的行。
x\{m\}  #重復字符x，m次，如：'0\{5\}'匹配包含5個o的行。 
x\{m,\}  #重復字符x,至少m次，如：'o\{5,\}'匹配至少有5個o的行。  
x\{m,n\}  #重復字符x，至少m次，不多於n次，如：'o\{5,10\}'匹配5--10個o的行。  
\w    #匹配文字和數字字符，也就是[A-Za-z0-9]，如：'G\w*p'匹配以G後跟零個或多個文字或數字字符，然後是p。  
\W    #\w的反置形式，匹配一個或多個非單詞字符，如點號句號等。  
\b    #單詞鎖定符，如: '\bgrep\b'只匹配grep。

#查找指定進程
ps -ef | grep svn

#查找指定進程個數
ps -ef | grep svn -c

#從文件中讀取關鍵詞
cat test1.txt | grep -f key.log

#從文件夾中遞歸查找以grep開頭的行，並只列出文件
grep -lR '^grep' /tmp

#查找非x開關的行內容
grep '^[^x]' test.txt

#顯示包含 ed 或者 at 字符的內容行
grep -E 'ed|at' test.txt
```

---

## **三、文件查找相關**

### **1、which 命令**

在 linux 要查找某個文件，但不知道放在哪裡了，可以使用下面的一些命令來搜索：

```bash
which     查看可執行文件的位置。
whereis 查看文件的位置。
locate  配合數據庫查看文件位置。
find        實際搜尋硬盤查詢文件名稱。
```

which 是在 PATH 就是指定的路徑中，搜索某個系統命令的位置，並返回第一個搜索結果。使用 which 命令，就可以看到某個系統命令是否存在，以及執行的到底是哪一個位置的命令。

```bash
-n 　指定文件名長度，指定的長度必須大於或等於所有文件中最長的文件名。

#查看 ls 命令是否存在，執行哪個
which ls

#查看 which
which which

#查看 cd
which cd（顯示不存在，因為 cd 是內建命令，而 which 查找顯示是 PATH 中的命令）

#查看當前 PATH 配置：
echo $PATH
#或使用 env 查看所有環境變量及對應值
```

### **2、whereis 命令**

whereis 命令只能用於程序名的搜索，而且只搜索二進制文件（參數-b）、man說明文件（參數-m）和源代碼文件（參數-s）。如果省略參數，則返回所有信息。whereis 及 locate 都是基於系統內建的數據庫進行搜索，因此效率很高，而find則是遍歷硬盤查找文件。

```bash
-b   定位可執行文件。
-m   定位幫助文件。
-s   定位源代碼文件。
-u   搜索默認路徑下除可執行文件、源代碼文件、幫助文件以外的其它文件。

#查找 locate 程序相關文件
whereis locate

#查找 locate 的源碼文件
whereis -s locate

#查找 lcoate 的幫助文件
whereis -m locate
```

### **3、locate 命令**

locate 通過搜尋系統內建文檔數據庫達到快速找到檔案，數據庫由 updatedb 程序來更新，updatedb 是由 cron daemon 週期性調用的。默認情況下 locate 命令在搜尋數據庫時比由整個由硬盤資料來搜尋資料來得快，但較差勁的是 locate 所找到的檔案若是最近才建立或 剛更名的，可能會找不到，在內定值中，updatedb 每天會跑一次，可以由修改 crontab 來更新設定值 (etc/crontab)。

locate 與 find 命令相似，可以使用如 *、? 等進行正則匹配查找

```bash
-l num（要顯示的行數）
-f   將特定的檔案系統排除在外，如將proc排除在外
-r   使用正則運算式做為尋找條件

#查找和 pwd 相關的所有文件(文件名中包含 pwd）
locate pwd

#搜索 etc 目錄下所有以 sh 開頭的文件
locate /etc/sh

#查找 /var 目錄下，以 reason 結尾的文件
locate -r '^/var.*reason$'  #（其中.表示一個字符，*表示任務多個；.*表示任意多個字符）
```

### **4、find 命令**

用於在文件樹中查找文件，並作出相應的處理。

```bash
find pathname -options [-print -exec -ok ...]

pathname: find命令所查找的目錄路徑。例如用.來表示當前目錄，用/來表示系統根目錄。
-print： find命令將匹配的文件輸出到標準輸出。
-exec： find命令對匹配的文件執行該參數所給出的shell命令。相應命令的形式為'command' {  } \;，注意{   }和\；之間的空格。
-ok： 和-exec的作用相同，只不過以一種更為安全的模式來執行該參數所給出的shell命令，在執行每一個命令之前，都會給出提示，讓用戶來確定是否執行。

命令選項：
-name 按照文件名查找文件
-perm 按文件權限查找文件
-user 按文件屬主查找文件
-group  按照文件所屬的組來查找文件。
-type  查找某一類型的文件，諸如：
   b - 塊設備文件
   d - 目錄
   c - 字符設備文件
   l - 符號鏈接文件
   p - 管道文件
   f - 普通文件

-size n :[c] 查找文件長度為n塊文件，帶有c時表文件字節大小
-amin n   查找系統中最後N分鐘訪問的文件
-atime n  查找系統中最後n*24小時訪問的文件
-cmin n   查找系統中最後N分鐘被改變文件狀態的文件
-ctime n  查找系統中最後n*24小時被改變文件狀態的文件
-mmin n   查找系統中最後N分鐘被改變文件數據的文件
-mtime n  查找系統中最後n*24小時被改變文件數據的文件
(用減號-來限定更改時間在距今n日以內的文件，而用加號+來限定更改時間在距今n日以前的文件。 )
-maxdepth n 最大查找目錄深度
-prune 選項來指出需要忽略的目錄。在使用-prune選項時要當心，因為如果你同時使用了-depth選項，那麼-prune選項就會被find命令忽略
-newer 如果希望查找更改時間比某個文件新但比另一個文件舊的所有文件，可以使用-newer選項

#查找 48 小時內修改過的文件
find -atime -2

#在當前目錄查找 以 .log 結尾的文件。 . 代表當前目錄
find ./ -name '*.log'

#查找 /opt 目錄下 權限為 777 的文件
find /opt -perm 777

#查找大於 1K 的文件
find -size +1000c

#查找等於 1000 字符的文件
find -size 1000c
```

exec 參數後面跟的是 command 命令，它的終止是以 ; 為結束標誌的，所以這句命令後面的分號是不可缺少的，考慮到各個系統中分號會有不同的意義，所以前面加反斜槓。{} 花括號代表前面find查找出來的文件名。

```bash
#在當前目錄中查找更改時間在10日以前的文件並刪除它們(無提醒）
find . -type f -mtime +10 -exec rm -f {} \;

#當前目錄中查找所有文件名以.log結尾、更改時間在5日以上的文件，並刪除它們，只不過在刪除之前先給出提示。 按y鍵刪除文件，按n鍵不刪除
find . -name '*.log' mtime +5 -ok -exec rm {} \;

#當前目錄下查找文件名以 passwd 開頭，內容包含 "pkg" 字符的文件
find . -f -name 'passwd*' -exec grep "pkg" {} \;

#用 exec 選項執行 cp 命令
find . -name '*.log' -exec cp {} test3 \;
```

xargs find 命令把匹配到的文件傳遞給 xargs 命令，而 xargs 命令每次只獲取一部分文件而不是全部，不像 -exec 選項那樣。這樣它可以先處理最先獲取的一部分文件，然後是下一批，並如此繼續下去。

```bash
#查找當前目錄下每個普通文件，然後使用 xargs 來判斷文件類型
find . -type f -print | xargs file

#查找當前目錄下所有以 js 結尾的並且其中包含 'editor' 字符的普通文件
find . -type f -name "*.js" -exec grep -lF 'ueditor' {} \;
find -type f -name '*.js' | xargs grep -lF 'editor'

#利用 xargs 執行 mv 命令
find . -name "*.log" | xargs -i mv {} test4

#用 grep 命令在當前目錄下的所有普通文件中搜索 hostnames 這個詞，並標出所在行：
find . -name \*(转义） -type f -print | xargs grep -n 'hostnames'

#查找當前目錄中以一個小寫字母開頭，最後是 4 到 9 加上 .log 結束的文件：
find . -name '[a-z]*[4-9].log' -print

#在 test 目錄查找不在 test4 子目錄查找
find test -path 'test/test4' -prune -o -print

#實例1：查找更改時間比文件 log2012.log新但比文件 log2017.log 舊的文件
find -newer log2012.log ! -newer log2017.log
```

**使用 depth 選項：**

depth 選項可以使 find 命令向磁帶上備份文件系統時，希望首先備份所有的文件，其次再備份子目錄中的文件。

實例：find 命令從文件系統的根目錄開始，查找一個名為 CON.FILE 的文件。 它將首先匹配所有的文件然後再進入子目錄中查找

```bash
find / -name "CON.FILE" -depth -print
```

---

## **四、進程系統相關**

### **1、ps 命令**

ps(process status)，用來查看當前運行的進程狀態，一次性查看，如果需要動態連續結果使用 top

linux上進程有5種狀態:

1. 運行(正在運行或在運行隊列中等待)
2. 中斷(休眠中, 受阻, 在等待某個條件的形成或接受到信號)
3. 不可中斷(收到信號不喚醒和不可運行, 進程必須等待直到有中斷發生)
4. 僵死(進程已終止, 但進程描述符存在, 直到父進程調用wait4()系統調用後釋放)
5. 停止(進程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信號後停止運行運行)

ps 工具標識進程的5種狀態碼:

```bash
D 不可中斷 uninterruptible sleep (usually IO)
R 運行 runnable (on run queue)
S 中斷 sleeping
T 停止 traced or stopped
Z 僵死 a defunct (”zombie”) process

**命令參數：**
-A 顯示所有進程
a 顯示所有進程
-a 顯示同一終端下所有進程
c 顯示進程真實名稱
e 顯示環境變量
f 顯示進程間的關係
r 顯示當前終端運行的進程
-aux 顯示所有包含其它使用的進程

#顯示當前所有進程環境變量及進程間關係
ps -ef

#顯示當前所有進程
ps -A

#與grep聯用查找某進程
ps -aux | grep apache

#找出與 cron 與 syslog 這兩個服務有關的 PID 號碼
ps aux | grep '(cron|syslog)'
```

### **2、top 命令**

顯示當前系統正在執行的進程的相關信息，包括進程 ID、內存佔用率、CPU 佔用率等

```bash
-c 顯示完整的進程命令
-s 保密模式
-p <進程號> 指定進程顯示
-n <次數>循環顯示次數

top - 14:06:23 up 70 days, 16:44,  2 users,  load average: 1.25, 1.32, 1.35
Tasks: 206 total,   1 running, 205 sleeping,   0 stopped,   0 zombie
Cpu(s):  5.9%us,  3.4%sy,  0.0%ni, 90.4%id,  0.0%wa,  0.0%hi,  0.2%si,  0.0%st
Mem:  32949016k total, 14411180k used, 18537836k free,   169884k buffers
Swap: 32764556k total,        0k used, 32764556k free,  3612636k cached

PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND  
28894 root      22   0 1501m 405m  10m S 52.2  1.3   2534:16 java
```

### **3、kill 命令**

發送指定的信號到相應進程。不指定型號將發送SIGTERM（15）終止指定進程。如果任無法終止該程序可用"-KILL" 參數，其發送的信號為SIGKILL(9) ，將強制結束進程，使用ps命令或者jobs 命令可以查看進程號。root用戶將影響用戶的進程，非root用戶只能影響自己的進程。

```bash
-l  信號，若果不加信號的編號參數，則使用「-l」參數會列出全部的信號名稱
-a  當處理當前進程時，不限制命令名和進程號的對應關係
-p  指定kill 命令只打印相關進程的進程號，而不發送任何信號
-s  指定發送信號
-u  指定用戶

#先使用ps查找進程pro1，然後用kill殺掉
kill -9 $(ps -ef | grep pro1)
```

### **4、free 命令**

顯示系統內存使用情況，包括物理內存、交互區內存(swap)和內核緩衝區內存。

```bash
-b 以Byte顯示內存使用情況
-k 以kb為單位顯示內存使用情況
-m 以mb為單位顯示內存使用情況
-g 以gb為單位顯示內存使用情況
-s<間隔秒數> 持續顯示內存
-t 顯示內存使用總合

#顯示內存使用情況
free
free -k
free -m

#以總和的形式顯示內存的使用信息
free -t

#週期性查詢內存使用情況
free -s 10
```

---

## **五、權限相關**

### **1、chmod 命令**

用於改變 linux 系統文件或目錄的訪問權限。用它控制文件或目錄的訪問權限。該命令有兩種用法。一種是包含字母和操作符表達式的文字設定法；另一種是包含數字的數字設定法。

每一文件或目錄的訪問權限都有三組，每組用三位表示，分別為文件屬主的讀、寫和執行權限；與屬主同組的用戶的讀、寫和執行權限；系統中其他用戶的讀、寫和執行權限。可使用 ls -l test.txt 查找。

以文件 log2012.log 為例：

```bash
-rw-r--r-- 1 root root 296K 11-13 06:03 log2012.log
```

第一列共有 10 個位置，第一個字符指定了文件類型。在通常意義上，一個目錄也是一個文件。如果第一個字符是橫線，表示是一個非目錄的文件。如果是 d，表示是一個目錄。從第二個字符開始到第十個 9 個字符，3 個字符一組，分別表示了 3 組用戶對文件或者目錄的權限。權限字符用橫線代表空許可，r 代表只讀，w 代表寫，x 代表可執行。

```bash
常用參數：
-c 當發生改變時，報告處理信息
-R 處理指定目錄以及其子目錄下所有文件

權限範圍：
u ：目錄或者文件的當前的用戶
g ：目錄或者文件的當前的群組
o ：除了目錄或者文件的當前用戶或群組之外的用戶或者群組
a ：所有的用戶及群組

權限代號：
r ：讀權限，用數字4表示
w ：寫權限，用數字2表示
x ：執行權限，用數字1表示
- ：刪除權限，用數字0表示
s ：特殊權限

#增加文件 t.log 所有用戶可執行權限
chmod a+x t.log

#撤銷原來所有的權限，然後使擁有者具有可讀權限,並輸出處理信息
chmod u=r t.log -c

#給 file 的屬主分配讀、寫、執行(7)的權限，給file的所在組分配讀、執行(5)的權限，給其他用戶分配執行(1)的權限
chmod 751 t.log -c（或者：chmod u=rwx,g=rx,o=x t.log -c)

#將 test 目錄及其子目錄所有文件添加可讀權限
chmod u+r,g+r,o+r -R text/ -c
```

### **2、chown 命令**

chown 將指定文件的擁有者改為指定的用戶或組，用戶可以是用戶名或者用戶 ID；組可以是組名或者組 ID；文件是以空格分開的要改變權限的文件列表，支持通配符。

```bash
-c 顯示更改的部分的信息
-R 處理指定目錄及子目錄

#改變擁有者和群組 並顯示改變信息
chown -c mail:mail log2012.log

#改變文件群組
chown -c :mail t.log

#改變文件夾及子文件目錄屬主及屬組為 mail
chown -cR mail: test/
```

---

## **六、磁盤空間**

### **1、df 命令**

顯示磁盤空間使用情況。獲取硬盤被佔用了多少空間，目前還剩下多少空間等信息，如果沒有文件名被指定，則所有當前被掛載的文件系統的可用空間將被顯示。默認情況下，磁盤空間將以 1KB 為單位進行顯示，除非環境變量 POSIXLY_CORRECT 被指定，那樣將以512字節為單位進行顯示：

```bash
-a 全部文件系統列表
-h 以方便閱讀的方式顯示信息
-i 顯示inode信息
-k 區塊為1024字節
-l 只顯示本地磁盤
-T 列出文件系統類型

#顯示磁盤使用情況
df -l

#以易讀方式列出所有文件系統及其類型
df -haT
```

### **2、du 命令**

du 命令也是查看使用空間的，但是與 df 命令不同的是 Linux du 命令是對文件和目錄磁盤使用的空間的查看：

```bash
du [選項] [文件]

常用參數：
-a 顯示目錄中所有文件大小
-k 以KB為單位顯示文件大小
-m 以MB為單位顯示文件大小
-g 以GB為單位顯示文件大小
-h 以易讀方式顯示文件大小
-s 僅顯示總計
-c或--total  除了顯示個別目錄或文件的大小外，同時也顯示所有目錄或文件的總和

#以易讀方式顯示文件夾內及子文件夾大小
du -h scf/

#以易讀方式顯示文件夾內所有文件大小
du -ah scf/

#顯示幾個文件或目錄各自佔用磁盤空間的大小，還統計它們的總和
du -hc test/ scf/

#輸出當前目錄下各個子目錄所使用的空間
du -hc --max-depth=1 scf/
```

---

## **七、時間日期相關**

### **1、date 命令**

顯示或設定系統的日期與時間。

```bash
-d<字符串> 　顯示字符串所指的日期與時間。字符串前後必須加上雙引號。
-s<字符串> 　根據字符串來設置日期與時間。字符串前後必須加上雙引號。
-u 　顯示GMT。
%H 小時(00-23)
%I 小时(00-12)
%M 分鐘(以00-59來表示)
%s 總秒數。起算時間為1970-01-01 00:00:00 UTC。
%S 秒(以本地的慣用法來表示)
%a 星期的縮寫。
%A 星期的完整名稱。
%d 日期(以01-31來表示)。
%D 日期(含年月日)。
%m 月份(以01-12來表示)。
%y 年份(以00-99來表示)。
%Y 年份(以四位數來表示)。

date +%Y%m%d --date="+1 day"  //顯示下一天的日期

#-d參數使用
date -d "nov 22"  今年的 11 月 22 日是星期三
date -d '2 weeks' 2周後的日期
date -d 'next monday' (下週一的日期)
date -d next-day +%Y%m%d（明天的日期）或者：date -d tomorrow +%Y%m%d
date -d last-day +%Y%m%d(昨天的日期) 或者：date -d yesterday +%Y%m%d
date -d last-month +%Y%m(上個月是幾月)
date -d next-month +%Y%m(下個月是幾月)
```

### **2、cal 命令**

可以用戶顯示公曆（陽曆）日曆如只有一個參數，則表示年份(1-9999)，如有兩個參數，則表示月份和年份：

```bash
常用參數：
-3 顯示前一月，當前月，後一月三個月的日曆
-m 顯示星期一為第一列
-j 顯示在當前年第幾天
-y [year]顯示當前年[year]份的日曆

#顯示指定年月日期
cal 9 2012

#顯示2013年每個月日曆
cal -y 2013

#將星期一做為第一列,顯示前中後三月
cal -3m
```